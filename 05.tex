\documentclass[a4paper,12pt,numbers=noenddot]{scrreport}

\usepackage[german]{datetime2}
\usepackage[onehalfspacing]{setspace}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amsfonts, amssymb, amsthm}
\usepackage{mathrsfs}

\usepackage{scrlayer-scrpage}
\renewcommand*{\chapterpagestyle}{scrheadings}
\clearpairofpagestyles

\ohead{\normalfont \today}
\chead{\normalfont Algebraic Automata Theory}
\ihead{\normalfont \rightmark}

\ofoot{\normalfont Seite~\pagemark}
\cfoot{\normalfont CAU Kiel - Technische Fakult√§t}
\ifoot{\normalfont Eric Hotho, Klaas Pelzer}

\KOMAoptions{headsepline=true,footsepline=true}
\renewcommand*{\chapterheadstartvskip}{\vspace*{-.4cm}}
\renewcommand*{\chapterheadendvskip}{\vspace{.5cm}}

\setlength{\parindent}{0pt}

\setkomafont{chapter}{\LARGE}
\setkomafont{section}{\Large}
\setkomafont{subsection}{\large}
\setkomafont{subsubsection}{\normalsize}
\setkomafont{paragraph}{\normalsize}
\setkomafont{subparagraph}{\small}
\usepackage[htt]{hyphenat}
\usepackage[german]{babel}
\setcounter{chapter}{3}

\def\lsk{\left<}
\def\rsk{\right>}
\DeclareMathOperator{\mmod}{mod}

\begin{document}
\automark{section}
\automark{chapter}

\setcounter{chapter}{4}
\chapter{}
\section{}
We have $M = (Q, \Sigma, \delta)$ and $\pi = \{H_i\}_{i \in I}$ a admissible partion of $Q$.
If $M$ is complete then for all $i \in I$ and for all $a \in \Sigma$ there exists \textbf{exactly one} partion such that for $j \in I$ $H_i\delta_a \subseteq H_j$.
By definition of $\pi$ (Lemma 3.48) there exists \textbf{at least one} $j \in I$ with $H_i\delta_a \subseteq H_j$.
Notice $H_i\delta_a \neq \emptyset$ because $M$ is complete.

We show that there only exists \textbf{exactly one} $j \in I$.
Suppose there exists $j,k \in I$ with $H_i\delta_a \subseteq H_{j,k}$ for all $a \in \Sigma$ and $j \neq k$.
We choose an arbitrary $q \in H_i$ then the following must hold:
\begin{align*}
    q\delta_a &= q_j \in H_j \\
    q\delta_a &= q_k \in H_k \\
\end{align*}
Notice $q_j \neq q_k$ because $H_j \cap H_k = \emptyset$.
This is a contraction because $q\delta_a$ is not right unique anymore.

\section{}
%We prove for a transformation semigroup  $(Q,S)$ which is irreducable that for all $q \in Q$ either $|qS| = 1$  or $qS = Q$.
%Assume $|qS| = 1$ for a given $q \in Q$. This means we find one arbitray but fixed $q' \in Q$ such that $qS = q'$.
%Thus, all states act the same and are equivalent, it is the trival partition of $Q$ itself.
%Now assume $qS = Q$ for a given $q \in Q$. This means for each $s \in S$ with $qs = q'$ we map to a different $q'$ such that $\bigcup q' %= Q$.
%Thus, we find no relation between the state and get the trivial partition of singleton classes.

%Finally suppose $|qS| > 1 \land qS \neq Q$ for all $q \in Q$.
%We can build the partition of $Q$ by states reachable of $q$ and not reachable by $q$.
%Let $$\pi = \{qS, Q \setminus qS\} = \{H_1, H_2\}$$.
%We show $\pi$ is an admissible partition for all $i \in I$ and all $s \in S$ there exists $j \in I$ such that $H_is \subseteq H_js$.
% Then there exists $qs' = q'$ and $qs'' = q''$ with $s',s'' \in S, q' \in H_j, q'' \in H_k$ and $j \neq k$.
% Also notice that that there exists at least one other $s''' \in S$ which is also in $H_j$ or $H_k$ because otherwise $qS = Q$.
% Therefore we found a partition that is not trivial which contradicts the premise $(Q,S)$ is irreducable.
% Then $qS$ maps into two or more patitions (up to $|Q|-1$) which contradicts the condition of $(Q,S)$ being irreducable.

Let $\pi = H_{i | i\in I}$ be an admissible partition on the transformation $Q$, than we know its equivalence classes are either singletons or the entire set $Q$. Now let's form the orbit $qS = {q' \in Q: s(q) = q' | q \in Q}$. \\
\textbf{Case 1:}\\
In this case, the trivial partition on $Q$ is $Q$ itself. This means, that for each state $q \in Q$, we can find an action $s \in S$ such that $s(q) = q' | q' \in Q$. Therefore, the cardinality of the orbit in this case is $|Q|$ itself.\\
\textbf{Case 2:}\\
In this case, the trivial partition on $Q$ is the set of singleton classes of $Q$. Here, each state $q \in Q$, is only able to reach itself via some $s \in S$, therefore, the cardinality of the orbit in this case has to be $1$.
\qed

\section{}
\begin{enumerate}
    \item Since, $Aut(M)$ is the set of all state machine automorphisms, this means that $f$ is a bijective function on $Q \times Q$, therefore, it only permutates the states of M. As, $\Sigma$ is  mapped to $\Sigma$ by the identity function, the transactions $\delta$ of $M$ do not change.\\
    Given Lemma 2.89, we know that given a set $Q$, $(S_Q, \circ, id_Q)$ is a group. We have already established that $Aut(M)$ only permutates states of $M$, and as $Aut(M)$ includes 'all' state machine automorphisms, it also includes the identity function.
    This concludes the proof, that $Aut(M)$ is a group.
    \qed
    \item Let $q_1, q_2 \in Q$ arbitrary but fixed with $q_1 = q_2\delta_w$ with $w \in \Sigma*$ and $q_1 \neq q_2$. Lets assume, that $f(q_1) = q_1$. Since, $Aut(M)$ is a state machine homomorphism with $(f, id_\Sigma)$, 
    \begin{equation}
        f(q\delta_w) \subseteq (f(q))\delta'_{id(w)}
    \end{equation}
    holds true. For $q_1, q_2$ and $w$ this results in:
    \begin{equation}
        f(q_1) = (f(q_2))\delta_w
    \end{equation}
    \begin{equation}
        q_1 = q_2'\delta_w | q_2 \in Q
    \end{equation}
    For (5.3) to be true, $q_2'$ would have to equal $q_2$, since $\delta$ and $\Sigma$ have not changed. This, however, would mean that if $f(q_1) = q_1 \rightarrow \forall q \in Q: f(q) = q$, since there exists a $w \in \Sigma*$ for all $q_1, q_2 \in Q$ with $q_1 = q_2\delta_w$, since, $M$ is transitive.
    \item Since, $\sim$ is an equivalence relation between $q_1$ and $q_2$, we can use it to impose a partition on $Q$ which we will call $\pi$ with $\pi = \{H_i\}_{i\in I}$. Now, we need to show that $\pi$ is admissible. For this to hold true there needs to exists a $j \in I$ for all $i \in I$ and for all $a \in \Sigma$ such that $H_i\delta_a \subseteq H_j$. Since, $(f, id_\Sigma)$ is an automorphism it is isomorphic and therefore $f$ is bijective. This means that all equivalence classes of $\pi$ are singletons. Since, all equivalence classes are singletons, there can never be the case that two elements of one equivalence class is mapped to two different equivalence classes. Therefore, $\pi$ is admissible.
    \qed
\end{enumerate}

\section{}
\end{document}

